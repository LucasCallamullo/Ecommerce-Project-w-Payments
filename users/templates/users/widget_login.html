<button class="btn btn-header" id="user-button" aria-haspopup="true" aria-expanded="false" aria-label="User Menu">
    <i class="fas fa-user"></i>
</button>

<!-- Contenido del dropdown -->
<div class="dropdown-menu p-3" id="user-dropdown" aria-labelledby="user-button">

    <!-- Cuando el usuario ya esta logeado visualiza esto -->
    {% if user.is_authenticated %}

        <!-- Bot贸n de Registro -->
        <a href="{% url 'Home' %}" class="btn-widget-register">
            <i class="fas fa-user-circle"></i>
            <span id="user-email"></span>
        </a>

        <form class="widget-register-form" method="POST" action="{% url 'close_session' %}">
            {% csrf_token %}
            <button type="submit">
                <i class="fas fa-door-open"></i>
                <span class="ms-2">Cerrar Sesi贸n</span>
            </button>
        </form>

        <script>
            document.addEventListener('DOMContentLoaded', function() {
                var email = "{{ user.email }}";
                var username = email.split('@')[0]; // Obtener la parte antes del '@'
                document.getElementById('user-email').textContent = username + ' @';
            });
        </script>

    {% else %}
    
        <form id=widget-register-form method="POST" action="{% url 'register_widget' %}" class="widget-register-form">
            {% csrf_token %}
        
            <!-- Campo de Email -->
            <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                {{ widget_form.email }}
            </div>

            <!-- Campo de Password -->
            <div class="mb-3">
                <label for="user-password" class="form-label">Password</label>
                {{ widget_form.password }}
            </div>

            <!-- Bot贸n de Login -->
            <button type="submit" class="btn btn-primary w-100">Login</button>
        </form>
        <hr>

        <!-- Bot贸n de Registro -->
        <a href="{% url 'register_user' %}" class="btn-widget-register">
            Register
        </a>

    {% endif %}
</div>

